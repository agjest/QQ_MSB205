<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.0.36">

  <meta name="author" content="Arnstein Gjestland">
  <title>MSB205 - Get ssb data</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="center">
  <h1 class="title">Get ssb data</h1>
  <p class="author">Arnstein Gjestland</p>
  <p class="institute">HVL</p>
  <p class="date">Spring 2021 (revised autumn 2022)</p>
</section>

<section class="slide level2">

<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(PxWebApiData)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(sp)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(spdep)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(spatialreg)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">library</span>(mctest)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">library</span>(huxtable)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">library</span>(tmap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="read-in-map-2017-unedited" class="slide level2">
<h2>Read in map 2017 (unedited)</h2>
<p>The map is converted from 432 to 426 multipolygons.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>map_2017 <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"map_2017_uned.gpkg"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">rename</span>(<span class="st">"knr"</span> <span class="ot">=</span> KOMMUNENUM) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="fu">group_by</span>(knr) <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="fu">summarise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">st_transform</span>(<span class="st">"EPSG:5973"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `map_2017_uned' from data source 
  `/Users/ag/Dev/QQ_MSB205/spatmetrics/data/map_2017_uned.gpkg' 
  using driver `GPKG'
Simple feature collection with 432 features and 1 field
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -99551.21 ymin: 6426048 xmax: 1121941 ymax: 7962744
Projected CRS: ETRS89 / UTM zone 33N</code></pre>
</div>
</div>
</section>
<section id="get-knr-and-knavn-from-local-file" class="slide level2">
<h2>Get knr and kNavn from local file</h2>
<p>We want the Norvegian names, hence we have to adjust the municipality names for Vetsfold 2017.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">load</span>(<span class="st">"bld06_19.Rdata"</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>knr_and_knavn <span class="ot">&lt;-</span> bld90_19 <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="fu">select</span>(knrNavn) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="co"># separate at the space after last digit</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="fu">separate</span>(<span class="at">col =</span> knrNavn, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"knr"</span>, <span class="st">"kNavn"</span>), <span class="at">sep=</span><span class="st">"</span><span class="sc">\\</span><span class="st">s"</span>, <span class="at">extra =</span> <span class="st">"merge"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-8"><a href="#cb4-8"></a>  <span class="fu">filter</span>(<span class="sc">!</span>knr <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"0712"</span>, <span class="st">"0715"</span>, <span class="st">"0729"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-9"><a href="#cb4-9"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb4-10"><a href="#cb4-10"></a>    <span class="fu">c</span>(<span class="at">knr =</span> <span class="st">"0702"</span>, <span class="at">kNavn =</span> <span class="st">"Holmestrand"</span>),</span>
<span id="cb4-11"><a href="#cb4-11"></a>    <span class="fu">c</span>(<span class="at">knr =</span> <span class="st">"0709"</span>, <span class="at">kNavn =</span> <span class="st">"Larvik"</span>),</span>
<span id="cb4-12"><a href="#cb4-12"></a>    <span class="fu">c</span>(<span class="at">knr =</span> <span class="st">"0714"</span>, <span class="at">kNavn =</span> <span class="st">"Hof"</span>),</span>
<span id="cb4-13"><a href="#cb4-13"></a>    <span class="fu">c</span>(<span class="at">knr =</span> <span class="st">"0722"</span>, <span class="at">kNavn =</span> <span class="st">"Nøtterøy"</span>),</span>
<span id="cb4-14"><a href="#cb4-14"></a>    <span class="fu">c</span>(<span class="at">knr =</span> <span class="st">"0723"</span>, <span class="at">kNavn =</span> <span class="st">"Tjøme"</span>),</span>
<span id="cb4-15"><a href="#cb4-15"></a>    <span class="fu">c</span>(<span class="at">knr =</span> <span class="st">"0728"</span>, <span class="at">kNavn =</span> <span class="st">"Lardal"</span>)</span>
<span id="cb4-16"><a href="#cb4-16"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># View(knr_and_knavn)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="get-ssb-data-via-api" class="slide level2">
<h2>Get ssb data via api</h2>
<ul>
<li class="fragment"><p>Get data registered on the municipality level from SSB</p>
<ul>
<li class="fragment">one trick to get a list of all these municipality tables is to search at SSB for <code>(K)</code> and then click on <code>Statistikkbanken</code> in the left column.</li>
</ul></li>
<li class="fragment"><p>We will use the SSB api exposed through the <code>PxWebApiData</code> R package.</p>
<ul>
<li class="fragment">This API can also be used against most Nordic SSB sister organisations.</li>
</ul></li>
<li class="fragment"><p>Since we have a list of the relevant municipalities for 2017 (<code>map_2017$knr</code>) we can restrict our api request to just these.</p></li>
<li class="fragment"><p>We are just going to use some of these variables in the following example</p>
<ul>
<li class="fragment">The other variables serves as examples and some might be used in further analysis.</li>
</ul></li>
<li class="fragment"><p>There is still plenty of relevant data at SSB</p>
<ul>
<li class="fragment">Quite trivial to get access to these using the techniques shown below.</li>
</ul></li>
<li class="fragment"><p>Our new dataset use pm2 for 2017 to avoid the big changes in Trøndelag 1.1 2018.</p></li>
</ul>
</section>
<section id="mean-price-per-sqr.-meter-for-sfd" class="slide level2">
<h2>Mean price per sqr. meter for SFD</h2>
<ul>
<li class="fragment">mean price per square meter in single family dwellings in each municipality (426)</li>
</ul>
<div class="fragment">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>pm2_2017 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="at">urlToData =</span> <span class="st">"06035"</span>,</span>
<span id="cb6-3"><a href="#cb6-3"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb6-4"><a href="#cb6-4"></a>    <span class="at">Boligtype =</span> <span class="st">"01"</span>,</span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li class="fragment">Pick element 2, dataset, in list returned</li>
</ul>
</div>
<div class="fragment">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>pm2_2017 <span class="ot">&lt;-</span> pm2_2017<span class="sc">$</span>dataset</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section>
<section id="mean-price-per-sqr.-meter-for-sfd-cont." class="slide level2">
<h2>Mean price per sqr. meter for SFD cont.</h2>
<ul>
<li class="fragment">Make it tidy</li>
</ul>
<div class="fragment">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Work on it to get it tidy</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>pm2_2017 <span class="ot">&lt;-</span> pm2_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">select</span>(<span class="sc">-</span>Boligtype, <span class="sc">-</span>Tid) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">rename</span>(</span>
<span id="cb8-5"><a href="#cb8-5"></a>    <span class="at">knr =</span> Region</span>
<span id="cb8-6"><a href="#cb8-6"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb8-8"><a href="#cb8-8"></a>    <span class="at">id_cols =</span> knr, </span>
<span id="cb8-9"><a href="#cb8-9"></a>    <span class="at">names_from =</span> <span class="st">"ContentsCode"</span>, </span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="at">values_from =</span> <span class="st">"value"</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="fu">rename</span>(</span>
<span id="cb8-13"><a href="#cb8-13"></a>    <span class="at">pm2 =</span> KvPris,</span>
<span id="cb8-14"><a href="#cb8-14"></a>    <span class="at">num_dwelling_sales =</span> Omsetninger </span>
<span id="cb8-15"><a href="#cb8-15"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li class="fragment">We are tidy!</li>
</ul>
</div>
<div class="fragment">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">dim</span>(pm2_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</div>
</section>
<section id="mean-price-per-sqr.-meter-for-sfd-cont.-1" class="slide level2">
<h2>Mean price per sqr. meter for SFD cont.</h2>
<ul>
<li class="fragment">Fill in for missing 2017</li>
<li class="fragment">Get average price per sqr. meter for single family dwellings (SFD) in each municipality (426)</li>
</ul>
<div class="fragment">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># 139 missing values. </span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="co"># Try other years for these</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>pm2_missing <span class="ot">&lt;-</span> pm2_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(pm2)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="fu">select</span>(knr)</span>
<span id="cb11-6"><a href="#cb11-6"></a></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co"># Get data for the years 2010:2016 and 2018</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>pm2_15to18 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb11-9"><a href="#cb11-9"></a>    <span class="at">urlToData =</span> <span class="st">"06035"</span>,</span>
<span id="cb11-10"><a href="#cb11-10"></a>    <span class="at">Region =</span> pm2_missing<span class="sc">$</span>knr,</span>
<span id="cb11-11"><a href="#cb11-11"></a>    <span class="at">Boligtype =</span> <span class="st">"01"</span>,</span>
<span id="cb11-12"><a href="#cb11-12"></a>    <span class="at">Tid =</span> <span class="fu">c</span>(<span class="fu">as.character</span>(<span class="dv">2010</span><span class="sc">:</span><span class="dv">2016</span>), <span class="st">"2018"</span>)</span>
<span id="cb11-13"><a href="#cb11-13"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section>
<section id="mean-price-per-sqr.-meter-for-sfd-cont.-2" class="slide level2">
<h2>Mean price per sqr. meter for SFD cont.</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Bad name, pm2_15to18 has data fram 2010 to 2016 and 2018</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="co"># Note tmp is not tidy, 8 obs. per row</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>tmp <span class="ot">&lt;-</span> pm2_15to18<span class="sc">$</span>dataset <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="fu">select</span>(<span class="sc">-</span>Boligtype) <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="#cb12-5"></a>  <span class="fu">rename</span>(<span class="at">knr =</span> Region) <span class="sc">%&gt;%</span> </span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb12-7"><a href="#cb12-7"></a>    <span class="at">id_cols =</span> knr,</span>
<span id="cb12-8"><a href="#cb12-8"></a>    <span class="at">names_from =</span> <span class="fu">c</span>(<span class="st">"ContentsCode"</span>, <span class="st">"Tid"</span>),</span>
<span id="cb12-9"><a href="#cb12-9"></a>    <span class="at">values_from =</span> <span class="st">"value"</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb12-11"><a href="#cb12-11"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-12"><a href="#cb12-12"></a>    <span class="at">pm2 =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb12-13"><a href="#cb12-13"></a>      <span class="fu">select</span>(</span>
<span id="cb12-14"><a href="#cb12-14"></a>        <span class="at">.data =</span> .,</span>
<span id="cb12-15"><a href="#cb12-15"></a>        KvPris_2010<span class="sc">:</span>KvPris_2018</span>
<span id="cb12-16"><a href="#cb12-16"></a>        ), </span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="co"># calculate mean of existing values</span></span>
<span id="cb12-18"><a href="#cb12-18"></a>      <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb12-19"><a href="#cb12-19"></a>      ),</span>
<span id="cb12-20"><a href="#cb12-20"></a>    <span class="at">num_dwelling_sales =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb12-21"><a href="#cb12-21"></a>      <span class="fu">select</span>(</span>
<span id="cb12-22"><a href="#cb12-22"></a>        <span class="at">.data =</span> .,</span>
<span id="cb12-23"><a href="#cb12-23"></a>        Omsetninger_2010<span class="sc">:</span>Omsetninger_2018</span>
<span id="cb12-24"><a href="#cb12-24"></a>        ),</span>
<span id="cb12-25"><a href="#cb12-25"></a>      <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb12-26"><a href="#cb12-26"></a>      )</span>
<span id="cb12-27"><a href="#cb12-27"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb12-28"><a href="#cb12-28"></a>  <span class="fu">select</span>(knr, pm2, num_dwelling_sales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>    <span class="co"># Very crude, we just take the mean of existing values</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>    pm2_2017 <span class="ot">&lt;-</span> pm2_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="co"># add new values from tmp to pm2_2017  </span></span>
<span id="cb13-4"><a href="#cb13-4"></a>      <span class="fu">left_join</span>(tmp, <span class="at">by =</span> <span class="st">"knr"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5"></a>      <span class="fu">mutate</span>(</span>
<span id="cb13-6"><a href="#cb13-6"></a>        <span class="at">pm2 =</span> <span class="fu">if_else</span>(</span>
<span id="cb13-7"><a href="#cb13-7"></a>          <span class="fu">is.na</span>(pm2.x), </span>
<span id="cb13-8"><a href="#cb13-8"></a>          <span class="fu">as.integer</span>(pm2.y), </span>
<span id="cb13-9"><a href="#cb13-9"></a>          pm2.x),</span>
<span id="cb13-10"><a href="#cb13-10"></a>        <span class="at">num_dwelling_sales =</span>  <span class="fu">if_else</span>(</span>
<span id="cb13-11"><a href="#cb13-11"></a>          <span class="fu">is.na</span>(pm2.x), </span>
<span id="cb13-12"><a href="#cb13-12"></a>          <span class="fu">as.integer</span>(num_dwelling_sales.y), </span>
<span id="cb13-13"><a href="#cb13-13"></a>          num_dwelling_sales.x</span>
<span id="cb13-14"><a href="#cb13-14"></a>          )</span>
<span id="cb13-15"><a href="#cb13-15"></a>        ) <span class="sc">%&gt;%</span> </span>
<span id="cb13-16"><a href="#cb13-16"></a>      <span class="fu">select</span>(knr, pm2, num_dwelling_sales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">summary</span>(pm2_2017<span class="sc">$</span>pm2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   5317   13213   16731   18177   21300   57525      95 </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="population" class="slide level2">
<h2>Population</h2>
<ul>
<li class="fragment">Start by getting metadata for the table 07459</li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>metadata_07459 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="st">"http://data.ssb.no/api/v0/en/table/07459"</span>,</span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="at">returnMetaFrames =</span> <span class="cn">TRUE</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">print</span>(<span class="fu">head</span>(<span class="fu">str</span>(metadata_07459), <span class="at">n =</span> <span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 5
 $ Region      :'data.frame':   856 obs. of  2 variables:
  ..$ values    : chr [1:856] "0" "30" "01" "3001" ...
  ..$ valueTexts: chr [1:856] "The whole country" "Viken" "Østfold (-2019)" "Halden" ...
 $ Kjonn       :'data.frame':   2 obs. of  2 variables:
  ..$ values    : chr [1:2] "1" "2"
  ..$ valueTexts: chr [1:2] "Males" "Females"
 $ Alder       :'data.frame':   106 obs. of  2 variables:
  ..$ values    : chr [1:106] "000" "001" "002" "003" ...
  ..$ valueTexts: chr [1:106] "0 years" "1 year" "2 years" "3 years" ...
 $ ContentsCode:'data.frame':   1 obs. of  2 variables:
  ..$ values    : chr "Personer1"
  ..$ valueTexts: chr "Persons"
 $ Tid         :'data.frame':   37 obs. of  2 variables:
  ..$ values    : chr [1:37] "1986" "1987" "1988" "1989" ...
  ..$ valueTexts: chr [1:37] "1986" "1987" "1988" "1989" ...
 - attr(*, "text")= Named chr [1:5] "region" "sex" "age" "contents" ...
  ..- attr(*, "names")= chr [1:5] "Region" "Kjonn" "Alder" "ContentsCode" ...
 - attr(*, "elimination")= Named logi [1:5] TRUE TRUE TRUE FALSE FALSE
  ..- attr(*, "names")= chr [1:5] "Region" "Kjonn" "Alder" "ContentsCode" ...
 - attr(*, "time")= Named logi [1:5] FALSE FALSE FALSE FALSE TRUE
  ..- attr(*, "names")= chr [1:5] "Region" "Kjonn" "Alder" "ContentsCode" ...
NULL</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="population-cont." class="slide level2">
<h2>Population cont.</h2>
<ul>
<li class="fragment">API query</li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co">#Get more info about table</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>api_query <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="st">"http://data.ssb.no/api/v0/en/table/07459"</span>,</span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="at">returnApiQuery =</span> <span class="cn">TRUE</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">print</span>(api_query)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "query": [
    {
      "code": "Region",
      "selection": {
        "filter": "item",
        "values": ["0", "99", "9999"]
      }
    },
    {
      "code": "Kjonn",
      "selection": {
        "filter": "item",
        "values": ["1", "2"]
      }
    },
    {
      "code": "Alder",
      "selection": {
        "filter": "item",
        "values": ["000", "104", "105+"]
      }
    },
    {
      "code": "ContentsCode",
      "selection": {
        "filter": "item",
        "values": ["Personer1"]
      }
    },
    {
      "code": "Tid",
      "selection": {
        "filter": "item",
        "values": ["1986", "2021", "2022"]
      }
    }
  ],
  "response": {
    "format": "json-stat"
  }
} </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="population-cont.-1" class="slide level2">
<h2>Population cont.</h2>
<ul>
<li class="fragment">Population, three categories 0-19, 20-64 and 65+</li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># Kjonn = FALSE, aggregate F+M</span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="co"># The F in "F0-19" DOES NOT indicate Female</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>bef_2017 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb22-4"><a href="#cb22-4"></a>    <span class="at">urlToData =</span> <span class="st">"07459"</span>,</span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co"># Pick data for the municipallities we have in our map </span></span>
<span id="cb22-6"><a href="#cb22-6"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb22-7"><a href="#cb22-7"></a>    <span class="at">Alder =</span> <span class="fu">list</span>(<span class="st">"agg:TredeltGrupperingB2"</span>, </span>
<span id="cb22-8"><a href="#cb22-8"></a>                 <span class="fu">c</span>(<span class="st">"F0-19"</span>, <span class="st">"F20-64"</span>, <span class="st">"F65+"</span>)),</span>
<span id="cb22-9"><a href="#cb22-9"></a>    <span class="at">Kjonn =</span> <span class="cn">FALSE</span>,</span>
<span id="cb22-10"><a href="#cb22-10"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb22-11"><a href="#cb22-11"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># list with 2 elements, we want dataset</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>bef_2017 <span class="ot">&lt;-</span> bef_2017<span class="sc">$</span>dataset</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># print function used to get console </span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="co"># output in slides</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="fu">print</span>(<span class="fu">head</span>(bef_2017, <span class="at">n =</span> <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  Region  Alder ContentsCode  Tid value
1   0101  F0-19    Personer1 2017  7033
2   0101 F20-64    Personer1 2017 17828
3   0101   F65+    Personer1 2017  5929
4   0104  F0-19    Personer1 2017  7453</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>bef_2017 <span class="ot">&lt;-</span> bef_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">select</span>(Region, Alder, value) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">rename</span>(</span>
<span id="cb26-4"><a href="#cb26-4"></a>    <span class="at">alder =</span> Alder,</span>
<span id="cb26-5"><a href="#cb26-5"></a>    <span class="at">knr =</span> Region,</span>
<span id="cb26-6"><a href="#cb26-6"></a>    <span class="at">bef =</span> value,</span>
<span id="cb26-7"><a href="#cb26-7"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="population-cont.-2" class="slide level2">
<h2>Population cont.</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>bef_2017 <span class="ot">&lt;-</span> bef_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> knr, <span class="at">names_from =</span> <span class="st">"alder"</span>, <span class="at">values_from =</span> <span class="st">"bef"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3"></a>  <span class="co"># rename variables</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>  <span class="fu">rename</span>(</span>
<span id="cb27-5"><a href="#cb27-5"></a>    <span class="at">pop_0_19 =</span> <span class="st">`</span><span class="at">F0-19</span><span class="st">`</span>,</span>
<span id="cb27-6"><a href="#cb27-6"></a>    <span class="at">pop_20_64 =</span> <span class="st">`</span><span class="at">F20-64</span><span class="st">`</span>,</span>
<span id="cb27-7"><a href="#cb27-7"></a>    <span class="at">pop_65p =</span> <span class="st">`</span><span class="at">F65+</span><span class="st">`</span></span>
<span id="cb27-8"><a href="#cb27-8"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb27-9"><a href="#cb27-9"></a>  <span class="co"># Calculate tot. pop.</span></span>
<span id="cb27-10"><a href="#cb27-10"></a>  <span class="fu">mutate</span>(<span class="at">tot_pop =</span> pop_0_19 <span class="sc">+</span> pop_20_64 <span class="sc">+</span> pop_65p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="co"># we are tidy</span></span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="fu">print</span>(<span class="fu">head</span>(bef_2017, <span class="at">n =</span> <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  knr   pop_0_19 pop_20_64 pop_65p tot_pop
  &lt;chr&gt;    &lt;int&gt;     &lt;int&gt;   &lt;int&gt;   &lt;int&gt;
1 0101      7033     17828    5929   30790
2 0104      7453     18688    6266   32407
3 0105     13227     31829   10071   55127
4 0106     18728     46969   14424   80121
5 0111       882      2533    1102    4517</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="co"># we are tidy</span></span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="fu">dim</span>(bef_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="education-level-percentage-each-level" class="slide level2">
<h2>Education level (percentage each level)</h2>
<ul>
<li class="fragment">Metadata</li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="co">#Get metadata</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>metadata_09429 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb32-3"><a href="#cb32-3"></a>  <span class="at">urlToData =</span> <span class="st">"http://data.ssb.no/api/v0/no/table/09429"</span>,  </span>
<span id="cb32-4"><a href="#cb32-4"></a>  <span class="at">returnMetaFrames =</span> <span class="cn">TRUE</span></span>
<span id="cb32-5"><a href="#cb32-5"></a>  )</span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="fu">str</span>(metadata_09429)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>List of 5
 $ Region      :'data.frame':   857 obs. of  2 variables:
  ..$ values    : chr [1:857] "0" "30" "01" "3001" ...
  ..$ valueTexts: chr [1:857] "Hele landet" "Viken" "Østfold (-2019)" "Halden" ...
 $ Nivaa       :'data.frame':   7 obs. of  2 variables:
  ..$ values    : chr [1:7] "00" "01" "02a" "11" ...
  ..$ valueTexts: chr [1:7] "Utdanningsnivå i alt" "Grunnskolenivå" "Videregående skolenivå" "Fagskolenivå" ...
 $ Kjonn       :'data.frame':   3 obs. of  2 variables:
  ..$ values    : chr [1:3] "0" "1" "2"
  ..$ valueTexts: chr [1:3] "Begge kjønn" "Menn" "Kvinner"
 $ ContentsCode:'data.frame':   2 obs. of  2 variables:
  ..$ values    : chr [1:2] "Personer" "PersonerProsent"
  ..$ valueTexts: chr [1:2] "Personer 16 år og over" "Personer 16 år og over (prosent)"
 $ Tid         :'data.frame':   43 obs. of  2 variables:
  ..$ values    : chr [1:43] "1970" "1980" "1981" "1982" ...
  ..$ valueTexts: chr [1:43] "1970" "1980" "1981" "1982" ...
 - attr(*, "text")= Named chr [1:5] "region" "nivå" "kjønn" "statistikkvariabel" ...
  ..- attr(*, "names")= chr [1:5] "Region" "Nivaa" "Kjonn" "ContentsCode" ...
 - attr(*, "elimination")= Named logi [1:5] TRUE TRUE TRUE FALSE FALSE
  ..- attr(*, "names")= chr [1:5] "Region" "Nivaa" "Kjonn" "ContentsCode" ...
 - attr(*, "time")= Named logi [1:5] FALSE FALSE FALSE FALSE TRUE
  ..- attr(*, "names")= chr [1:5] "Region" "Nivaa" "Kjonn" "ContentsCode" ...</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="education-level-percentage-each-level-cont." class="slide level2">
<h2>Education level (percentage each level) cont.</h2>
<ul>
<li class="fragment">Api Query</li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co">#Get more info about table</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>api_query_09429 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="st">"http://data.ssb.no/api/v0/en/table/09429"</span>,</span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="at">returnApiQuery =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-5"><a href="#cb34-5"></a></span>
<span id="cb34-6"><a href="#cb34-6"></a><span class="fu">print</span>(api_query_09429)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>{
  "query": [
    {
      "code": "Region",
      "selection": {
        "filter": "item",
        "values": ["0", "99", "9999"]
      }
    },
    {
      "code": "Nivaa",
      "selection": {
        "filter": "item",
        "values": ["00", "04a", "09a"]
      }
    },
    {
      "code": "Kjonn",
      "selection": {
        "filter": "item",
        "values": ["0", "1", "2"]
      }
    },
    {
      "code": "ContentsCode",
      "selection": {
        "filter": "item",
        "values": ["Personer", "PersonerProsent"]
      }
    },
    {
      "code": "Tid",
      "selection": {
        "filter": "item",
        "values": ["1970", "2020", "2021"]
      }
    }
  ],
  "response": {
    "format": "json-stat"
  }
} </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="education-level-percentage-each-level-cont.-1" class="slide level2">
<h2>Education level (percentage each level) cont.</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="co"># Get data from SSB</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>edu_2017 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb36-3"><a href="#cb36-3"></a>    <span class="at">urlToData =</span> <span class="st">"09429"</span>,</span>
<span id="cb36-4"><a href="#cb36-4"></a>    <span class="co"># we want in percent</span></span>
<span id="cb36-5"><a href="#cb36-5"></a>    <span class="at">ContentsCode =</span> <span class="st">"PersonerProsent"</span>,</span>
<span id="cb36-6"><a href="#cb36-6"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb36-7"><a href="#cb36-7"></a>    <span class="co"># Drop "00" since total, </span></span>
<span id="cb36-8"><a href="#cb36-8"></a>    <span class="co"># 100%, also dro "09a" Uoppgit</span></span>
<span id="cb36-9"><a href="#cb36-9"></a>    <span class="at">Nivaa =</span> <span class="fu">c</span>(<span class="st">"01"</span>, <span class="st">"02a"</span>, </span>
<span id="cb36-10"><a href="#cb36-10"></a>              <span class="st">"11"</span>, <span class="st">"03a"</span>, <span class="st">"04a"</span>),</span>
<span id="cb36-11"><a href="#cb36-11"></a>    <span class="at">Kjonn =</span> <span class="cn">FALSE</span>,</span>
<span id="cb36-12"><a href="#cb36-12"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb36-13"><a href="#cb36-13"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># Pick the needed variables</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>edu_2017 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="co"># want knr</span></span>
<span id="cb37-4"><a href="#cb37-4"></a>  <span class="at">knr =</span> edu_2017<span class="sc">$</span>dataset<span class="sc">$</span>Region , </span>
<span id="cb37-5"><a href="#cb37-5"></a>  <span class="co"># want level descriptions, not code</span></span>
<span id="cb37-6"><a href="#cb37-6"></a>  <span class="at">nivaa =</span> edu_2017<span class="sc">$</span><span class="st">`</span><span class="at">09429: Personer 16 år og over, etter region, nivå, statistikkvariabel og år</span><span class="st">`</span><span class="sc">$</span>nivå,</span>
<span id="cb37-7"><a href="#cb37-7"></a>  <span class="at">edu_lev_percent =</span> edu_2017<span class="sc">$</span>dataset<span class="sc">$</span>value</span>
<span id="cb37-8"><a href="#cb37-8"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:60%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># Have a look at it</span></span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="fu">print</span>(<span class="fu">head</span>(edu_2017, <span class="at">n=</span><span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  knr   nivaa                               edu_lev_percent
  &lt;chr&gt; &lt;chr&gt;                                         &lt;dbl&gt;
1 0101  Grunnskolenivå                                 30.7
2 0101  Videregående skolenivå                         39.8
3 0101  Fagskolenivå                                    2.3
4 0101  Universitets- og høgskolenivå, kort            21.6
5 0101  Universitets- og høgskolenivå, lang             5.6
6 0104  Grunnskolenivå                                 29.8
7 0104  Videregående skolenivå                         37.6</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="education-level-percentage-each-level-cont.-2" class="slide level2">
<h2>Education level (percentage each level) cont.</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="co">#make tidy</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>edu_2017 <span class="ot">&lt;-</span> edu_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="#cb40-3"></a>   <span class="fu">pivot_wider</span>(</span>
<span id="cb40-4"><a href="#cb40-4"></a>     <span class="at">id_cols =</span> knr, </span>
<span id="cb40-5"><a href="#cb40-5"></a>     <span class="at">names_from =</span> <span class="st">"nivaa"</span>, </span>
<span id="cb40-6"><a href="#cb40-6"></a>     <span class="at">values_from =</span> <span class="st">"edu_lev_percent"</span></span>
<span id="cb40-7"><a href="#cb40-7"></a>     ) <span class="sc">%&gt;%</span> </span>
<span id="cb40-8"><a href="#cb40-8"></a>  <span class="fu">rename</span>(</span>
<span id="cb40-9"><a href="#cb40-9"></a>    <span class="at">edu_prim =</span> <span class="st">`</span><span class="at">Grunnskolenivå</span><span class="st">`</span>,</span>
<span id="cb40-10"><a href="#cb40-10"></a>    <span class="at">edu_sec =</span> <span class="st">`</span><span class="at">Videregående skolenivå</span><span class="st">`</span>,</span>
<span id="cb40-11"><a href="#cb40-11"></a>    <span class="at">edu_voc =</span> <span class="st">`</span><span class="at">Fagskolenivå</span><span class="st">`</span>,</span>
<span id="cb40-12"><a href="#cb40-12"></a>    <span class="at">edu_uni_short =</span> <span class="st">`</span><span class="at">Universitets- og høgskolenivå, kort</span><span class="st">`</span>,</span>
<span id="cb40-13"><a href="#cb40-13"></a>    <span class="at">edu_uni_long =</span> <span class="st">`</span><span class="at">Universitets- og høgskolenivå, lang</span><span class="st">`</span></span>
<span id="cb40-14"><a href="#cb40-14"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div id="60" class="column" style="width:60%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># Tidy OK</span></span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="fu">print</span>(<span class="fu">head</span>(edu_2017, <span class="at">n =</span> <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  knr   edu_prim edu_sec edu_voc edu_uni_short edu_uni_long
  &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;
1 0101      30.7    39.8     2.3          21.6          5.6
2 0104      29.8    37.6     2.5          21.8          8.3
3 0105      33.2    40.2     2.5          19.9          4.2
4 0106      29.8    38.6     2.6          22.6          6.3
5 0111      25.7    42       3.3          21.9          7.1</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="fu">dim</span>(edu_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="household-income" class="slide level2">
<h2>Household income</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="co"># Get metadata </span></span>
<span id="cb45-2"><a href="#cb45-2"></a>metadata_07183 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb45-3"><a href="#cb45-3"></a>  <span class="at">urlToData =</span> <span class="st">"http://data.ssb.no/api/v0/no/table/07183"</span>,</span>
<span id="cb45-4"><a href="#cb45-4"></a>  <span class="at">returnMetaFrames =</span> <span class="cn">TRUE</span></span>
<span id="cb45-5"><a href="#cb45-5"></a>  )</span>
<span id="cb45-6"><a href="#cb45-6"></a></span>
<span id="cb45-7"><a href="#cb45-7"></a><span class="fu">print</span>(<span class="fu">str</span>(metadata_07183))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ Region      :'data.frame':   822 obs. of  2 variables:
  ..$ values    : chr [1:822] "3001" "3002" "3003" "3004" ...
  ..$ valueTexts: chr [1:822] "Halden" "Moss" "Sarpsborg" "Fredrikstad" ...
 $ ContentsCode:'data.frame':   8 obs. of  2 variables:
  ..$ values    : chr [1:8] "Hushold" "Inntekt1" "Inntekt2" "Inntekt3" ...
  ..$ valueTexts: chr [1:8] "Antall husholdninger" "Samlet inntekt under 150 000 kr, prosent" "Samlet inntekt 150 000 - 249 999 kr, prosent" "Samlet inntekt  250 000 - 349 999 kr, prosent" ...
 $ Tid         :'data.frame':   15 obs. of  2 variables:
  ..$ values    : chr [1:15] "2006" "2007" "2008" "2009" ...
  ..$ valueTexts: chr [1:15] "2006" "2007" "2008" "2009" ...
 - attr(*, "text")= Named chr [1:3] "region" "statistikkvariabel" "år"
  ..- attr(*, "names")= chr [1:3] "Region" "ContentsCode" "Tid"
 - attr(*, "elimination")= Named logi [1:3] FALSE FALSE FALSE
  ..- attr(*, "names")= chr [1:3] "Region" "ContentsCode" "Tid"
 - attr(*, "time")= Named logi [1:3] FALSE FALSE TRUE
  ..- attr(*, "names")= chr [1:3] "Region" "ContentsCode" "Tid"
NULL</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="household-income-cont." class="slide level2">
<h2>Household income cont.</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="co">#Get more info about table</span></span>
<span id="cb47-2"><a href="#cb47-2"></a>api_query_07183 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb47-3"><a href="#cb47-3"></a><span class="st">"http://data.ssb.no/api/v0/en/table/07183"</span>,</span>
<span id="cb47-4"><a href="#cb47-4"></a><span class="at">returnApiQuery =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-5"><a href="#cb47-5"></a></span>
<span id="cb47-6"><a href="#cb47-6"></a><span class="fu">print</span>(api_query_07183)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>{
  "query": [
    {
      "code": "Region",
      "selection": {
        "filter": "item",
        "values": ["3001", "2599", "9999"]
      }
    },
    {
      "code": "ContentsCode",
      "selection": {
        "filter": "item",
        "values": ["Hushold", "Inntekt6", "Inntekt7"]
      }
    },
    {
      "code": "Tid",
      "selection": {
        "filter": "item",
        "values": ["2006", "2019", "2020"]
      }
    }
  ],
  "response": {
    "format": "json-stat"
  }
} </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="household-income-cont.-1" class="slide level2">
<h2>Household income cont.</h2>
<div class="columns">
<div class="column" style="width:30%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>inc_2017 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb49-2"><a href="#cb49-2"></a>    <span class="at">urlToData =</span> <span class="st">"07183"</span>,</span>
<span id="cb49-3"><a href="#cb49-3"></a>    <span class="co"># "Hushold" would </span></span>
<span id="cb49-4"><a href="#cb49-4"></a>    <span class="co"># also get us </span></span>
<span id="cb49-5"><a href="#cb49-5"></a>    <span class="co"># total number of</span></span>
<span id="cb49-6"><a href="#cb49-6"></a>    <span class="co"># households in muni</span></span>
<span id="cb49-7"><a href="#cb49-7"></a>    <span class="at">ContentsCode =</span> <span class="fu">c</span>(</span>
<span id="cb49-8"><a href="#cb49-8"></a>      <span class="fu">paste</span>(</span>
<span id="cb49-9"><a href="#cb49-9"></a>        <span class="st">"Inntekt"</span>, </span>
<span id="cb49-10"><a href="#cb49-10"></a>        <span class="fu">seq</span>(</span>
<span id="cb49-11"><a href="#cb49-11"></a>          <span class="at">from =</span> <span class="dv">1</span>, </span>
<span id="cb49-12"><a href="#cb49-12"></a>          <span class="at">to =</span> <span class="dv">7</span>), </span>
<span id="cb49-13"><a href="#cb49-13"></a>        <span class="at">sep =</span> <span class="st">""</span></span>
<span id="cb49-14"><a href="#cb49-14"></a>        )</span>
<span id="cb49-15"><a href="#cb49-15"></a>      ),</span>
<span id="cb49-16"><a href="#cb49-16"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb49-17"><a href="#cb49-17"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb49-18"><a href="#cb49-18"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:70%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="fu">print</span>(<span class="fu">head</span>(</span>
<span id="cb50-2"><a href="#cb50-2"></a>  inc_2017<span class="sc">$</span><span class="st">`</span><span class="at">07183: Husholdninger, etter region, statistikkvariabel og år</span><span class="st">`</span>, </span>
<span id="cb50-3"><a href="#cb50-3"></a>  <span class="at">n=</span><span class="dv">9</span></span>
<span id="cb50-4"><a href="#cb50-4"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          region                            statistikkvariabel   år value
1 Halden (-2019)      Samlet inntekt under 150 000 kr, prosent 2017     3
2 Halden (-2019)  Samlet inntekt 150 000 - 249 999 kr, prosent 2017     9
3 Halden (-2019) Samlet inntekt  250 000 - 349 999 kr, prosent 2017    13
4 Halden (-2019) Samlet inntekt  350 000 - 449 999 kr, prosent 2017    12
5 Halden (-2019) Samlet inntekt  450 000 - 549 999 kr, prosent 2017    11
6 Halden (-2019) Samlet inntekt  550 000 - 749 999 kr, prosent 2017    17
7 Halden (-2019)    Samlet inntekt 750 000 kr og over, prosent 2017    37
8   Moss (-2019)      Samlet inntekt under 150 000 kr, prosent 2017     3
9   Moss (-2019)  Samlet inntekt 150 000 - 249 999 kr, prosent 2017     8
  NAstatus
1     &lt;NA&gt;
2     &lt;NA&gt;
3     &lt;NA&gt;
4     &lt;NA&gt;
5     &lt;NA&gt;
6     &lt;NA&gt;
7     &lt;NA&gt;
8     &lt;NA&gt;
9     &lt;NA&gt;</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="household-income-cont.-2" class="slide level2">
<h2>Household income cont.</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>inc_2017 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="co"># want knr</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="at">knr =</span> inc_2017<span class="sc">$</span>dataset<span class="sc">$</span>Region , </span>
<span id="cb52-4"><a href="#cb52-4"></a>  <span class="co"># want level descriptions, not code</span></span>
<span id="cb52-5"><a href="#cb52-5"></a>  <span class="at">inc_cat =</span> inc_2017<span class="sc">$</span><span class="st">`</span><span class="at">07183: Husholdninger, etter region, statistikkvariabel og år</span><span class="st">`</span><span class="sc">$</span>statistikkvariabel,</span>
<span id="cb52-6"><a href="#cb52-6"></a>  <span class="at">inc_lev_percent =</span> inc_2017<span class="sc">$</span>dataset<span class="sc">$</span>value</span>
<span id="cb52-7"><a href="#cb52-7"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>inc_2017 <span class="ot">&lt;-</span> inc_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="#cb53-2"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb53-3"><a href="#cb53-3"></a>     <span class="at">id_cols =</span> knr, </span>
<span id="cb53-4"><a href="#cb53-4"></a>     <span class="at">names_from =</span> <span class="st">"inc_cat"</span>, </span>
<span id="cb53-5"><a href="#cb53-5"></a>     <span class="at">values_from =</span> <span class="st">"inc_lev_percent"</span></span>
<span id="cb53-6"><a href="#cb53-6"></a>     ) <span class="sc">%&gt;%</span> </span>
<span id="cb53-7"><a href="#cb53-7"></a>  <span class="fu">rename</span>(</span>
<span id="cb53-8"><a href="#cb53-8"></a>    <span class="co"># Some problem with names here, had to do names(inc_2017) above and </span></span>
<span id="cb53-9"><a href="#cb53-9"></a>    <span class="co"># then copy the text strings</span></span>
<span id="cb53-10"><a href="#cb53-10"></a>    <span class="at">inc_0_150 =</span> <span class="st">`</span><span class="at">Samlet inntekt under 150 000 kr, prosent</span><span class="st">`</span>,</span>
<span id="cb53-11"><a href="#cb53-11"></a>    <span class="at">inc_150_250 =</span> <span class="st">`</span><span class="at">Samlet inntekt 150 000 - 249 999 kr, prosent</span><span class="st">`</span>,</span>
<span id="cb53-12"><a href="#cb53-12"></a>    <span class="at">inc_250_350 =</span> <span class="st">`</span><span class="at">Samlet inntekt  250 000 - 349 999 kr, prosent</span><span class="st">`</span>,</span>
<span id="cb53-13"><a href="#cb53-13"></a>    <span class="at">inc_350_450 =</span> <span class="st">`</span><span class="at">Samlet inntekt  350 000 - 449 999 kr, prosent</span><span class="st">`</span>,</span>
<span id="cb53-14"><a href="#cb53-14"></a>    <span class="at">inc_450_550 =</span> <span class="st">`</span><span class="at">Samlet inntekt  450 000 - 549 999 kr, prosent</span><span class="st">`</span>,</span>
<span id="cb53-15"><a href="#cb53-15"></a>    <span class="at">inc_550_750 =</span> <span class="st">`</span><span class="at">Samlet inntekt  550 000 - 749 999 kr, prosent</span><span class="st">`</span>,</span>
<span id="cb53-16"><a href="#cb53-16"></a>    <span class="at">inc_750k_p =</span> <span class="st">`</span><span class="at">Samlet inntekt 750 000 kr og over, prosent</span><span class="st">`</span></span>
<span id="cb53-17"><a href="#cb53-17"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a><span class="fu">dim</span>(inc_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="household-income-cont.-3" class="slide level2">
<h2>Household income cont.</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="co"># we are tidy</span></span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="fu">print</span>(<span class="fu">head</span>(inc_2017, <span class="at">n =</span> <span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 8
  knr   inc_0_150 inc_150_250 inc_250_350 inc_350_450 inc_450_…¹ inc_5…² inc_7…³
  &lt;chr&gt;     &lt;int&gt;       &lt;int&gt;       &lt;int&gt;       &lt;int&gt;      &lt;int&gt;   &lt;int&gt;   &lt;int&gt;
1 0101          3           9          13          12         11      17      37
2 0104          3           8          13          12         11      17      36
3 0105          2           9          13          11         11      17      37
4 0106          2           9          12          10         11      16      39
5 0111          1           6           9           9         10      18      46
6 0118          3           7          13           9         11      17      40
7 0119          2           9          14          12         10      17      36
# … with abbreviated variable names ¹​inc_450_550, ²​inc_550_750, ³​inc_750k_p</code></pre>
</div>
</div>
</section>
<section id="household-net-capital-wealth" class="slide level2">
<h2>Household net capital (wealth)</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>wealth_2017_ssb <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb58-2"><a href="#cb58-2"></a>    <span class="at">urlToData =</span> <span class="st">"10320"</span>,</span>
<span id="cb58-3"><a href="#cb58-3"></a>    <span class="co"># "Hushold" would also get us </span></span>
<span id="cb58-4"><a href="#cb58-4"></a>    <span class="co"># total number of households in muni</span></span>
<span id="cb58-5"><a href="#cb58-5"></a>    <span class="at">ContentsCode =</span> <span class="fu">c</span>(<span class="st">"Hushald (prosent)"</span>),</span>
<span id="cb58-6"><a href="#cb58-6"></a>    <span class="at">Nettoform =</span> <span class="fu">c</span>(<span class="st">"12"</span>, <span class="st">"13"</span>, <span class="st">"10"</span>, </span>
<span id="cb58-7"><a href="#cb58-7"></a>                  <span class="st">"25"</span>, <span class="st">"31"</span>, <span class="st">"11"</span>, <span class="st">"32"</span></span>
<span id="cb58-8"><a href="#cb58-8"></a>                  ),</span>
<span id="cb58-9"><a href="#cb58-9"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb58-10"><a href="#cb58-10"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb58-11"><a href="#cb58-11"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>wealth_2017 <span class="ot">&lt;-</span> wealth_2017_ssb<span class="sc">$</span>dataset <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="#cb59-2"></a>  <span class="fu">tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb59-3"><a href="#cb59-3"></a>  <span class="fu">select</span>(<span class="sc">-</span>ContentsCode, <span class="sc">-</span>Tid) <span class="sc">%&gt;%</span> </span>
<span id="cb59-4"><a href="#cb59-4"></a>  <span class="fu">rename</span>(</span>
<span id="cb59-5"><a href="#cb59-5"></a>    <span class="at">knr =</span> Region,</span>
<span id="cb59-6"><a href="#cb59-6"></a>    <span class="at">net_cap =</span> Nettoform,</span>
<span id="cb59-7"><a href="#cb59-7"></a>    <span class="at">cap_lev_percent =</span> value) <span class="sc">%&gt;%</span> </span>
<span id="cb59-8"><a href="#cb59-8"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb59-9"><a href="#cb59-9"></a>     <span class="at">id_cols =</span> knr, </span>
<span id="cb59-10"><a href="#cb59-10"></a>     <span class="at">names_from =</span> <span class="st">"net_cap"</span>, </span>
<span id="cb59-11"><a href="#cb59-11"></a>     <span class="at">values_from =</span> <span class="st">"cap_lev_percent"</span></span>
<span id="cb59-12"><a href="#cb59-12"></a>     ) <span class="sc">%&gt;%</span> </span>
<span id="cb59-13"><a href="#cb59-13"></a>  <span class="fu">rename</span>(</span>
<span id="cb59-14"><a href="#cb59-14"></a>    <span class="at">net_cap_0_250k =</span> <span class="st">`</span><span class="at">12</span><span class="st">`</span>,</span>
<span id="cb59-15"><a href="#cb59-15"></a>    <span class="at">net_cap_250k_500k =</span> <span class="st">`</span><span class="at">13</span><span class="st">`</span>,</span>
<span id="cb59-16"><a href="#cb59-16"></a>    <span class="at">net_cap_500k_1000k =</span> <span class="st">`</span><span class="at">10</span><span class="st">`</span>,</span>
<span id="cb59-17"><a href="#cb59-17"></a>    <span class="at">net_cap_1000k_2000k =</span> <span class="st">`</span><span class="at">25</span><span class="st">`</span>,</span>
<span id="cb59-18"><a href="#cb59-18"></a>    <span class="at">net_cap_2000k_3000k =</span> <span class="st">`</span><span class="at">31</span><span class="st">`</span>,</span>
<span id="cb59-19"><a href="#cb59-19"></a>    <span class="at">net_cap_3000k_4000k =</span> <span class="st">`</span><span class="at">11</span><span class="st">`</span>,</span>
<span id="cb59-20"><a href="#cb59-20"></a>    <span class="at">net_cap_4000k_p =</span> <span class="st">`</span><span class="at">32</span><span class="st">`</span>,</span>
<span id="cb59-21"><a href="#cb59-21"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</section>
<section id="household-net-capital-wealth-1" class="slide level2">
<h2>Household net capital (wealth)</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="co"># we are tidy</span></span>
<span id="cb60-2"><a href="#cb60-2"></a><span class="fu">print</span>(<span class="fu">head</span>(wealth_2017, <span class="at">n =</span> <span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  knr   net_cap_0_250k net_cap_250k_500k net_c…¹ net_c…² net_c…³ net_c…⁴ net_c…⁵
  &lt;chr&gt;          &lt;dbl&gt;             &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 0101            31.6               5.1    10.1    19.6    13.4     8.6    11.5
2 0104            28.7               4.1     8      17.5    15       9.7    16.9
3 0105            27.7               4.5     9.5    19.2    15.6    10.1    13.4
4 0106            28.8               4.3     8.1    17.6    15.7    10.4    15  
5 0111            18.4               3.1     5.3    12.7    14      14.7    31.9
6 0118            30.7               5.6    12.2    19.1    14.3     7.4    10.6
# … with abbreviated variable names ¹​net_cap_500k_1000k, ²​net_cap_1000k_2000k,
#   ³​net_cap_2000k_3000k, ⁴​net_cap_3000k_4000k, ⁵​net_cap_4000k_p</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="fu">dim</span>(wealth_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</section>
<section id="employed-by-government" class="slide level2">
<h2>Employed by government</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="co"># Get vdata from SSB</span></span>
<span id="cb64-2"><a href="#cb64-2"></a>gov_emp_2017 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb64-3"><a href="#cb64-3"></a>    <span class="at">urlToData =</span> <span class="st">"12628"</span>,</span>
<span id="cb64-4"><a href="#cb64-4"></a>    <span class="co"># total num.of gov. emp. </span></span>
<span id="cb64-5"><a href="#cb64-5"></a>    <span class="co"># in each muni</span></span>
<span id="cb64-6"><a href="#cb64-6"></a>    <span class="at">StatligEnhet =</span> <span class="st">"0"</span>,</span>
<span id="cb64-7"><a href="#cb64-7"></a>    <span class="co"># in yearly eq.</span></span>
<span id="cb64-8"><a href="#cb64-8"></a>    <span class="at">ContentsCode =</span> <span class="st">"AvtalteArsverk"</span>,</span>
<span id="cb64-9"><a href="#cb64-9"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb64-10"><a href="#cb64-10"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb64-11"><a href="#cb64-11"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="co"># Select wanted variables</span></span>
<span id="cb65-2"><a href="#cb65-2"></a>gov_emp_2017 <span class="ot">&lt;-</span> gov_emp_2017<span class="sc">$</span>dataset <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="#cb65-3"></a>  <span class="fu">select</span>(Region, value) <span class="sc">%&gt;%</span> </span>
<span id="cb65-4"><a href="#cb65-4"></a>  <span class="fu">rename</span>(</span>
<span id="cb65-5"><a href="#cb65-5"></a>    <span class="at">knr =</span> Region,</span>
<span id="cb65-6"><a href="#cb65-6"></a>    <span class="at">gov_emp =</span> value</span>
<span id="cb65-7"><a href="#cb65-7"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</section>
<section id="employed-by-government-1" class="slide level2">
<h2>Employed by government</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="co">#we are tidy</span></span>
<span id="cb66-2"><a href="#cb66-2"></a><span class="fu">print</span>(<span class="fu">head</span>(gov_emp_2017, <span class="at">n =</span> <span class="dv">15</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    knr gov_emp
1  0101     997
2  0104     614
3  0105    1102
4  0106     740
5  0111      18
6  0118       3
7  0119      67
8  0121       1
9  0122     142
10 0123      12
11 0124     102
12 0125      48
13 0127       4
14 0128      16
15 0135      56</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a><span class="fu">dim</span>(gov_emp_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</section>
<section id="wholesale-and-retail-trade-sales" class="slide level2">
<h2>Wholesale and retail trade sales</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>sales_per_capita_2017  <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb70-2"><a href="#cb70-2"></a>    <span class="at">urlToData =</span> <span class="st">"04776"</span>,</span>
<span id="cb70-3"><a href="#cb70-3"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb70-4"><a href="#cb70-4"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb70-5"><a href="#cb70-5"></a>)</span>
<span id="cb70-6"><a href="#cb70-6"></a></span>
<span id="cb70-7"><a href="#cb70-7"></a>sales_per_capita_2017  <span class="ot">&lt;-</span> </span>
<span id="cb70-8"><a href="#cb70-8"></a>  sales_per_capita_2017<span class="sc">$</span>dataset <span class="sc">%&gt;%</span>  </span>
<span id="cb70-9"><a href="#cb70-9"></a>  <span class="fu">select</span>(Region, value) <span class="sc">%&gt;%</span> </span>
<span id="cb70-10"><a href="#cb70-10"></a>  <span class="co"># spc sales per capita</span></span>
<span id="cb70-11"><a href="#cb70-11"></a>  <span class="fu">rename</span>(</span>
<span id="cb70-12"><a href="#cb70-12"></a>    <span class="at">knr =</span> Region,</span>
<span id="cb70-13"><a href="#cb70-13"></a>    <span class="at">spc =</span> value</span>
<span id="cb70-14"><a href="#cb70-14"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a><span class="co"># we are tidy</span></span>
<span id="cb71-2"><a href="#cb71-2"></a><span class="fu">print</span>(<span class="fu">head</span>(sales_per_capita_2017))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   knr   spc
1 0101 65919
2 0104 77498
3 0105 69540
4 0106 80019
5 0111 96079
6 0118 19794</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a><span class="fu">dim</span>(sales_per_capita_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="household-income-before-and-after-tax-in-decile-percent" class="slide level2">
<h2>Household income before and after tax in decile (percent)</h2>
<ul>
<li class="fragment">Percent relative to national decile.</li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>inc_dec_2017 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb75-2"><a href="#cb75-2"></a>    <span class="at">urlToData =</span> <span class="st">"12558"</span>,</span>
<span id="cb75-3"><a href="#cb75-3"></a>    <span class="at">ContentsCode =</span> <span class="st">"AndelHush"</span>,</span>
<span id="cb75-4"><a href="#cb75-4"></a>    <span class="at">Desiler =</span> <span class="fu">c</span>(<span class="fu">paste</span>(<span class="dv">0</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">sep =</span> <span class="st">""</span>), <span class="st">"10"</span>),</span>
<span id="cb75-5"><a href="#cb75-5"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb75-6"><a href="#cb75-6"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb75-7"><a href="#cb75-7"></a>)</span>
<span id="cb75-8"><a href="#cb75-8"></a></span>
<span id="cb75-9"><a href="#cb75-9"></a>inc_dec_2017 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb75-10"><a href="#cb75-10"></a>  <span class="co"># want knr</span></span>
<span id="cb75-11"><a href="#cb75-11"></a>  <span class="at">knr =</span> inc_dec_2017<span class="sc">$</span>dataset<span class="sc">$</span>Region , </span>
<span id="cb75-12"><a href="#cb75-12"></a>  <span class="co"># want level descriptions, not code</span></span>
<span id="cb75-13"><a href="#cb75-13"></a>  <span class="at">tax =</span> inc_dec_2017<span class="sc">$</span><span class="st">`</span><span class="at">12558: Husholdninger, etter region, inntekt før/etter skatt, desil, statistikkvariabel og år</span><span class="st">`</span><span class="sc">$</span><span class="st">`</span><span class="at">inntekt før/etter skatt</span><span class="st">`</span>,</span>
<span id="cb75-14"><a href="#cb75-14"></a>  <span class="at">decile =</span> inc_dec_2017<span class="sc">$</span>dataset<span class="sc">$</span>Desiler,</span>
<span id="cb75-15"><a href="#cb75-15"></a>  <span class="at">percent =</span> inc_dec_2017<span class="sc">$</span>dataset<span class="sc">$</span>value</span>
<span id="cb75-16"><a href="#cb75-16"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a>inc_dec_2017 <span class="ot">&lt;-</span> inc_dec_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="#cb76-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb76-3"><a href="#cb76-3"></a>    <span class="at">tax =</span> <span class="fu">case_when</span>(</span>
<span id="cb76-4"><a href="#cb76-4"></a>      <span class="co"># income before and after tax</span></span>
<span id="cb76-5"><a href="#cb76-5"></a>      tax <span class="sc">==</span> <span class="st">"Samlet inntekt"</span> <span class="sc">~</span> <span class="st">"inc_bt"</span>,</span>
<span id="cb76-6"><a href="#cb76-6"></a>      tax <span class="sc">==</span> <span class="st">"Inntekt etter skatt"</span> <span class="sc">~</span> <span class="st">"inc_at"</span>,</span>
<span id="cb76-7"><a href="#cb76-7"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.character</span>(tax)</span>
<span id="cb76-8"><a href="#cb76-8"></a>    )</span>
<span id="cb76-9"><a href="#cb76-9"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb76-10"><a href="#cb76-10"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb76-11"><a href="#cb76-11"></a>     <span class="at">id_cols =</span> knr, </span>
<span id="cb76-12"><a href="#cb76-12"></a>     <span class="at">names_from =</span> <span class="fu">c</span>(<span class="st">"tax"</span>, <span class="st">"decile"</span>), </span>
<span id="cb76-13"><a href="#cb76-13"></a>     <span class="at">values_from =</span> <span class="st">"percent"</span></span>
<span id="cb76-14"><a href="#cb76-14"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="household-income-before-and-after-tax-in-decile-percent-cont." class="slide level2">
<h2>Household income before and after tax in decile (percent) cont.</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a><span class="co"># we are tidy</span></span>
<span id="cb77-2"><a href="#cb77-2"></a><span class="fu">print</span>(<span class="fu">head</span>(inc_dec_2017))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 21
  knr   inc_bt…¹ inc_b…² inc_b…³ inc_b…⁴ inc_b…⁵ inc_b…⁶ inc_b…⁷ inc_b…⁸ inc_b…⁹
  &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 0101      11.7    12      11.3    10.4    10.5    10.5    10       9.7     8.3
2 0104      10.7    12.2    11.5    11.3    10.4    10.3     9.1     8.6     8.4
3 0105      10.8    12      10.5    11      10.6    10.6    10.5    10.1     7.9
4 0106      10.7    11.4    10.2    10.8    10.3    10.2    10.1     9.7     9.1
5 0111       7.5     8.3     9.4     9.2    10.8    11.6    10.6    11.5    10.3
6 0118       9.6    11.9     9      10.1    11.3    11.3    11.9    10.6     7.9
# … with 11 more variables: inc_bt_10 &lt;dbl&gt;, inc_at_01 &lt;dbl&gt;, inc_at_02 &lt;dbl&gt;,
#   inc_at_03 &lt;dbl&gt;, inc_at_04 &lt;dbl&gt;, inc_at_05 &lt;dbl&gt;, inc_at_06 &lt;dbl&gt;,
#   inc_at_07 &lt;dbl&gt;, inc_at_08 &lt;dbl&gt;, inc_at_09 &lt;dbl&gt;, inc_at_10 &lt;dbl&gt;, and
#   abbreviated variable names ¹​inc_bt_01, ²​inc_bt_02, ³​inc_bt_03, ⁴​inc_bt_04,
#   ⁵​inc_bt_05, ⁶​inc_bt_06, ⁷​inc_bt_07, ⁸​inc_bt_08, ⁹​inc_bt_09</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="fu">dim</span>(inc_dec_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</section>
<section id="industries" class="slide level2">
<h2>Industries</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a>num_emp_2017_ssb <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb81-2"><a href="#cb81-2"></a>    <span class="at">urlToData =</span> <span class="st">"07196"</span>,</span>
<span id="cb81-3"><a href="#cb81-3"></a>    <span class="at">OrgFormer =</span> <span class="fu">c</span>(<span class="st">"99"</span>,<span class="st">"02"</span>,<span class="st">"03"</span>,<span class="st">"04"</span>,<span class="st">"10"</span>,<span class="st">"24"</span>),</span>
<span id="cb81-4"><a href="#cb81-4"></a>    <span class="at">AntAnsatte =</span> <span class="fu">c</span>(<span class="st">"99"</span>, <span class="st">"00"</span>, <span class="st">"01"</span>,<span class="st">"02"</span>,<span class="st">"03"</span>,<span class="st">"04"</span>,<span class="st">"05"</span>,<span class="st">"15"</span>,<span class="st">"16"</span>),</span>
<span id="cb81-5"><a href="#cb81-5"></a>    <span class="at">NACE2007 =</span> <span class="fu">c</span>(<span class="st">"01-99"</span>),</span>
<span id="cb81-6"><a href="#cb81-6"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb81-7"><a href="#cb81-7"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb81-8"><a href="#cb81-8"></a>)</span>
<span id="cb81-9"><a href="#cb81-9"></a><span class="co">#so that we keep the ssb data</span></span>
<span id="cb81-10"><a href="#cb81-10"></a>num_emp_2017 <span class="ot">&lt;-</span> num_emp_2017_ssb<span class="sc">$</span><span class="st">`</span><span class="at">07196: Foretak (1.1.) unntatt offentlig forvaltning og primærnæringene, etter region, organisasjonsform, næring (SN2007), antall ansatte, statistikkvariabel og år</span><span class="st">`</span></span>
<span id="cb81-11"><a href="#cb81-11"></a>num_emp_2017<span class="sc">$</span>knr <span class="ot">&lt;-</span> num_emp_2017_ssb<span class="sc">$</span>dataset<span class="sc">$</span>Region</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a>num_emp_2017 <span class="ot">&lt;-</span> num_emp_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="#cb82-2"></a>  <span class="co"># drop two variables</span></span>
<span id="cb82-3"><a href="#cb82-3"></a>  <span class="fu">select</span>(<span class="sc">-</span>region, <span class="sc">-</span>statistikkvariabel, <span class="sc">-</span>år, <span class="sc">-</span><span class="st">`</span><span class="at">næring (SN2007)</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb82-4"><a href="#cb82-4"></a>  <span class="co"># want knr to the left, really not necessary </span></span>
<span id="cb82-5"><a href="#cb82-5"></a>  <span class="fu">select</span>(knr,<span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb82-6"><a href="#cb82-6"></a>  <span class="co"># rename before pivot to names liked by R</span></span>
<span id="cb82-7"><a href="#cb82-7"></a>  <span class="fu">rename</span>(</span>
<span id="cb82-8"><a href="#cb82-8"></a>    <span class="at">org_form =</span> organisasjonsform,</span>
<span id="cb82-9"><a href="#cb82-9"></a>    <span class="at">num_emp_group =</span> <span class="st">`</span><span class="at">antall ansatte</span><span class="st">`</span>,</span>
<span id="cb82-10"><a href="#cb82-10"></a>    <span class="at">firms =</span> value</span>
<span id="cb82-11"><a href="#cb82-11"></a>  )</span>
<span id="cb82-12"><a href="#cb82-12"></a></span>
<span id="cb82-13"><a href="#cb82-13"></a>num_emp_2017 <span class="ot">&lt;-</span>  num_emp_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb82-14"><a href="#cb82-14"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb82-15"><a href="#cb82-15"></a>     <span class="at">id_cols =</span> knr, </span>
<span id="cb82-16"><a href="#cb82-16"></a>     <span class="at">names_from =</span> <span class="fu">c</span>(<span class="st">"org_form"</span>, <span class="st">"num_emp_group"</span>), </span>
<span id="cb82-17"><a href="#cb82-17"></a>     <span class="at">values_from =</span> <span class="st">"firms"</span></span>
<span id="cb82-18"><a href="#cb82-18"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</section>
<section id="industries-cont." class="slide level2">
<h2>Industries cont.</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a><span class="co"># we are tidy</span></span>
<span id="cb83-2"><a href="#cb83-2"></a><span class="fu">print</span>(<span class="fu">head</span>(num_emp_2017))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 55
  knr   I alt_…¹ I alt…² I alt…³ I alt…⁴ I alt…⁵ I alt…⁶ I alt…⁷ I alt…⁸ I alt…⁹
  &lt;chr&gt;    &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;
1 0101      2098    1407     414     142      82      40       8       3       2
2 0104      2550    1698     534     153      87      55      11      11       1
3 0105      3564    2255     782     261     161      69      19      14       3
4 0106      6035    3994    1251     384     231     119      32      19       5
5 0111       429     306      87      25       8       3       0       0       0
6 0118       114      88      18       5       3       0       0       0       0
# … with 45 more variables: `Ansvarlig selskap_Alle størrelsesgrupper` &lt;int&gt;,
#   `Ansvarlig selskap_Ingen ansatte` &lt;int&gt;,
#   `Ansvarlig selskap_1-4 ansatte` &lt;int&gt;,
#   `Ansvarlig selskap_5-9 ansatte` &lt;int&gt;,
#   `Ansvarlig selskap_10-19 ansatte` &lt;int&gt;,
#   `Ansvarlig selskap_20-49 ansatte` &lt;int&gt;,
#   `Ansvarlig selskap_50-99 ansatte` &lt;int&gt;, …</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="fu">dim</span>(num_emp_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</section>
<section id="supply-of-single-family-dwellings-sfd" class="slide level2">
<h2>Supply of single family dwellings (SFD)</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a>sup_sfd_2017 <span class="ot">&lt;-</span> <span class="fu">ApiData</span>(</span>
<span id="cb87-2"><a href="#cb87-2"></a>    <span class="at">urlToData =</span> <span class="st">"05940"</span>,</span>
<span id="cb87-3"><a href="#cb87-3"></a>    <span class="at">Byggeareal =</span> <span class="fu">c</span>(<span class="st">"111"</span>, <span class="st">"112"</span>),</span>
<span id="cb87-4"><a href="#cb87-4"></a>    <span class="at">Region =</span> map_2017<span class="sc">$</span>knr,</span>
<span id="cb87-5"><a href="#cb87-5"></a>    <span class="at">Tid =</span> <span class="st">"2017"</span></span>
<span id="cb87-6"><a href="#cb87-6"></a>)</span>
<span id="cb87-7"><a href="#cb87-7"></a></span>
<span id="cb87-8"><a href="#cb87-8"></a>sup_sfd_2017 <span class="ot">&lt;-</span> sup_sfd_2017<span class="sc">$</span><span class="st">`</span><span class="at">05940: Boligbygg, etter region, bygningstype, statistikkvariabel og år</span><span class="st">`</span> <span class="sc">%&gt;%</span> </span>
<span id="cb87-9"><a href="#cb87-9"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb87-10"><a href="#cb87-10"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> sup_sfd_2017<span class="sc">$</span>dataset<span class="sc">$</span>Region) <span class="sc">%&gt;%</span> </span>
<span id="cb87-11"><a href="#cb87-11"></a>  <span class="fu">rename</span>(<span class="at">knr =</span> region) <span class="sc">%&gt;%</span> </span>
<span id="cb87-12"><a href="#cb87-12"></a>  <span class="fu">select</span>(<span class="sc">-</span>år) <span class="sc">%&gt;%</span> </span>
<span id="cb87-13"><a href="#cb87-13"></a>  <span class="fu">unite</span>(tmp, bygningstype, statistikkvariabel, <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb87-14"><a href="#cb87-14"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb87-15"><a href="#cb87-15"></a>     <span class="at">id_cols =</span> knr, </span>
<span id="cb87-16"><a href="#cb87-16"></a>     <span class="at">names_from =</span> <span class="st">"tmp"</span>, </span>
<span id="cb87-17"><a href="#cb87-17"></a>     <span class="at">values_from =</span> <span class="st">"value"</span></span>
<span id="cb87-18"><a href="#cb87-18"></a>     ) <span class="sc">%&gt;%</span> </span>
<span id="cb87-19"><a href="#cb87-19"></a>  <span class="co"># sfd Single Family Dwelling</span></span>
<span id="cb87-20"><a href="#cb87-20"></a>  <span class="co"># We have to escape the old variable names because of the spaces </span></span>
<span id="cb87-21"><a href="#cb87-21"></a>  <span class="fu">rename</span>(</span>
<span id="cb87-22"><a href="#cb87-22"></a>    <span class="at">sfd_started =</span> <span class="st">`</span><span class="at">Enebolig_Igangsatte boliger</span><span class="st">`</span>,</span>
<span id="cb87-23"><a href="#cb87-23"></a>    <span class="at">sfd_ba_started =</span> <span class="st">`</span><span class="at">Enebolig_Bruksareal igangsatte boliger (m²)</span><span class="st">`</span>,</span>
<span id="cb87-24"><a href="#cb87-24"></a>    <span class="at">sfd_ba_completed =</span> <span class="st">`</span><span class="at">Enebolig_Bruksareal fullførte boliger (m²)</span><span class="st">`</span>,</span>
<span id="cb87-25"><a href="#cb87-25"></a>    <span class="co"># w2u with 2 units</span></span>
<span id="cb87-26"><a href="#cb87-26"></a>    <span class="at">sfd_w2u_started =</span> <span class="st">`</span><span class="at">Enebolig med hybelleilighet, sokkelleilighet o.l._Igangsatte boliger</span><span class="st">`</span>,</span>
<span id="cb87-27"><a href="#cb87-27"></a>    <span class="at">sfd_w2u_ba_started =</span> <span class="st">`</span><span class="at">Enebolig med hybelleilighet, sokkelleilighet o.l._Bruksareal igangsatte boliger (m²)</span><span class="st">`</span>,</span>
<span id="cb87-28"><a href="#cb87-28"></a>    <span class="at">sfd_w2u_ba_completed =</span> <span class="st">`</span><span class="at">Enebolig med hybelleilighet, sokkelleilighet o.l._Bruksareal fullførte boliger (m²)</span><span class="st">`</span>  </span>
<span id="cb87-29"><a href="#cb87-29"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="supply-of-single-family-dwellings-sfd-cont." class="slide level2">
<h2>Supply of single family dwellings (SFD) cont.</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="co"># we are tidy</span></span>
<span id="cb88-2"><a href="#cb88-2"></a><span class="fu">print</span>(<span class="fu">head</span>(sup_sfd_2017, <span class="at">n =</span> <span class="dv">8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 7
  knr   sfd_started sfd_ba_started sfd_ba_completed sfd_w2u_st…¹ sfd_w…² sfd_w…³
  &lt;chr&gt;       &lt;int&gt;          &lt;int&gt;            &lt;int&gt;        &lt;int&gt;   &lt;int&gt;   &lt;int&gt;
1 0101           69          11933             9014           20    1998    1907
2 0104           20           4401             2879            2     325     291
3 0105           27           7744            10480           14    1740    2139
4 0106           80          15658            15084           20    2500    2236
5 0111           18           3223             4013            0       0     303
6 0118            0              0              338            0       0       0
7 0119           10           1942             1526            0       0       0
8 0121            1            156              156            0       0       0
# … with abbreviated variable names ¹​sfd_w2u_started, ²​sfd_w2u_ba_started,
#   ³​sfd_w2u_ba_completed</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a><span class="fu">dim</span>(sup_sfd_2017)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426</code></pre>
</div>
</div>
</section>
<section id="centrality-index" class="slide level2">
<h2>Centrality index</h2>
<ul>
<li class="fragment">From SSB, for the year 2018, but we use it for 2017. Probably very small changes from 2017 to 2018. Changed knr for Trøndelag to the old numbers. Split 5054 Indre Fosen into 1624 Rissa and 1718 Leksvik. The last two was given the same centrality as the combined entity.</li>
</ul>
<div class="fragment">
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a>centrality_2018_ed <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"Sentralitet 2018_ed.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section>
<section id="centrality-index-cont." class="slide level2">
<h2>Centrality index cont.</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a><span class="fu">print</span>(<span class="fu">head</span>(centrality_2018_ed))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  knr   sen_ind sen_kl
  &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;
1 0101      843      3
2 0104      932      1
3 0105      887      2
4 0106      884      2
5 0111      725      4
6 0118      660      4</code></pre>
</div>
</div>
</section>
<section id="put-it-all-together" class="slide level2">
<h2>Put it all together</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a><span class="fu">names</span>(pm2_2017)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "knr"                "pm2"                "num_dwelling_sales"</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a>data_2017 <span class="ot">&lt;-</span> knr_and_knavn <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="#cb97-2"></a>  <span class="fu">left_join</span>(pm2_2017) <span class="sc">%&gt;%</span> </span>
<span id="cb97-3"><a href="#cb97-3"></a>  <span class="fu">left_join</span>(bef_2017) <span class="sc">%&gt;%</span> </span>
<span id="cb97-4"><a href="#cb97-4"></a>  <span class="fu">left_join</span>(edu_2017) <span class="sc">%&gt;%</span> </span>
<span id="cb97-5"><a href="#cb97-5"></a>  <span class="fu">left_join</span>(inc_2017) <span class="sc">%&gt;%</span> </span>
<span id="cb97-6"><a href="#cb97-6"></a>  <span class="fu">left_join</span>(gov_emp_2017) <span class="sc">%&gt;%</span></span>
<span id="cb97-7"><a href="#cb97-7"></a>  <span class="fu">left_join</span>(sales_per_capita_2017) <span class="sc">%&gt;%</span></span>
<span id="cb97-8"><a href="#cb97-8"></a>  <span class="fu">left_join</span>(inc_dec_2017) <span class="sc">%&gt;%</span></span>
<span id="cb97-9"><a href="#cb97-9"></a>  <span class="fu">left_join</span>(wealth_2017) <span class="sc">%&gt;%</span> </span>
<span id="cb97-10"><a href="#cb97-10"></a>  <span class="fu">left_join</span>(num_emp_2017) <span class="sc">%&gt;%</span></span>
<span id="cb97-11"><a href="#cb97-11"></a>  <span class="fu">left_join</span>(sup_sfd_2017) <span class="sc">%&gt;%</span> </span>
<span id="cb97-12"><a href="#cb97-12"></a>  <span class="fu">left_join</span>(centrality_2018_ed ) <span class="sc">%&gt;%</span> </span>
<span id="cb97-13"><a href="#cb97-13"></a>  <span class="fu">mutate</span>(</span>
<span id="cb97-14"><a href="#cb97-14"></a>    <span class="at">log_pm2 =</span> <span class="fu">log</span>(pm2),</span>
<span id="cb97-15"><a href="#cb97-15"></a>    <span class="at">spc_100k =</span> spc<span class="sc">/</span><span class="dv">100000</span>,</span>
<span id="cb97-16"><a href="#cb97-16"></a>    <span class="at">gov_emp_1k =</span> gov_emp<span class="sc">/</span><span class="dv">1000</span>,</span>
<span id="cb97-17"><a href="#cb97-17"></a>    <span class="at">sen_ind_1k =</span> sen_ind<span class="sc">/</span><span class="dv">1000</span></span>
<span id="cb97-18"><a href="#cb97-18"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb97-19"><a href="#cb97-19"></a>  <span class="co"># rearrange </span></span>
<span id="cb97-20"><a href="#cb97-20"></a>  <span class="fu">select</span>(knr, kNavn, pm2, log_pm2, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="put-it-all-together-cont." class="slide level2">
<h2>Put it all together cont.</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a><span class="fu">dim</span>(data_2017)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 426 115</code></pre>
</div>
</div>
<ul>
<li class="fragment">We have 115 variables and 426 observations.</li>
</ul>
</section>
<section id="add-data-to-our-map" class="slide level2">
<h2>Add data to our map</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1"></a><span class="co"># join map and data</span></span>
<span id="cb100-2"><a href="#cb100-2"></a>map_data_2017 <span class="ot">&lt;-</span> map_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="#cb100-3"></a>  <span class="fu">left_join</span>(data_2017)</span>
<span id="cb100-4"><a href="#cb100-4"></a><span class="co"># write out new map with data</span></span>
<span id="cb100-5"><a href="#cb100-5"></a><span class="co"># if one add new variables it might </span></span>
<span id="cb100-6"><a href="#cb100-6"></a><span class="co"># be necessary to delete the file </span></span>
<span id="cb100-7"><a href="#cb100-7"></a><span class="co"># before writing new version</span></span>
<span id="cb100-8"><a href="#cb100-8"></a><span class="fu">st_write</span>(</span>
<span id="cb100-9"><a href="#cb100-9"></a>  <span class="at">obj =</span> map_data_2017, </span>
<span id="cb100-10"><a href="#cb100-10"></a>  <span class="at">dsn =</span> <span class="st">"map_data_2017.gpkg"</span>, </span>
<span id="cb100-11"><a href="#cb100-11"></a>  <span class="at">driver =</span> <span class="st">"GPKG"</span>, </span>
<span id="cb100-12"><a href="#cb100-12"></a>  <span class="at">append =</span> <span class="cn">FALSE</span></span>
<span id="cb100-13"><a href="#cb100-13"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Deleting layer `map_data_2017' using driver `GPKG'
Writing layer `map_data_2017' to data source `map_data_2017.gpkg' using driver `GPKG'
Writing 426 features with 115 fields and geometry type Multi Polygon.</code></pre>
</div>
</div>
</section>
<section id="references" class="slide level2 smaller scrollable">
<h2>References</h2>

<div class="footer footer-default">
<p><a href="../../index.html">MSB205</a></p>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-spdep2022" class="csl-entry" role="doc-biblioentry">
Bivand, Roger. 2022a. <span>“R Packages for Analyzing Spatial Data: A Comparative Case Study with Areal Data.”</span> <em>Geographical Analysis</em> 54 (3): 488–518. <a href="https://doi.org/10.1111/gean.12319">https://doi.org/10.1111/gean.12319</a>.
</div>
<div id="ref-R-spdep" class="csl-entry" role="doc-biblioentry">
———. 2022b. <em>Spdep: Spatial Dependence: Weighting Schemes, Statistics</em>. <a href="https://CRAN.R-project.org/package=spdep">https://CRAN.R-project.org/package=spdep</a>.
</div>
<div id="ref-sp2013" class="csl-entry" role="doc-biblioentry">
Bivand, Roger S., Edzer Pebesma, and Virgilio Gomez-Rubio. 2013a. <em>Applied Spatial Data Analysis with <span>R</span>, Second Edition</em>. Springer, NY. <a href="https://asdar-book.org/">https://asdar-book.org/</a>.
</div>
<div id="ref-spatialreg2013b" class="csl-entry" role="doc-biblioentry">
———. 2013b. <em>Applied Spatial Data Analysis with <span>R</span>, Second Edition</em>. Springer, NY. <a href="https://asdar-book.org/">https://asdar-book.org/</a>.
</div>
<div id="ref-spdep2013" class="csl-entry" role="doc-biblioentry">
———. 2013c. <em>Applied Spatial Data Analysis with <span>R</span>, Second Edition</em>. Springer, NY. <a href="https://asdar-book.org/">https://asdar-book.org/</a>.
</div>
<div id="ref-spatialreg2013a" class="csl-entry" role="doc-biblioentry">
Bivand, Roger, Jan Hauke, and Tomasz Kossowski. 2013. <span>“Computing the Jacobian in Gaussian Spatial Autoregressive Models: An Illustrated Comparison of Available Methods.”</span> <em>Geographical Analysis</em> 45 (2): 150–79. <a href="https://doi.org/10.1111/gean.12008">https://doi.org/10.1111/gean.12008</a>.
</div>
<div id="ref-spatialreg2021a" class="csl-entry" role="doc-biblioentry">
Bivand, Roger, Giovanni Millo, and Gianfranco Piras. 2021. <span>“A Review of Software for Spatial Econometrics in <span>R</span>.”</span> <em>Mathematics</em> 9 (11). <a href="https://doi.org/10.3390/math9111276">https://doi.org/10.3390/math9111276</a>.
</div>
<div id="ref-spatialreg2015a" class="csl-entry" role="doc-biblioentry">
Bivand, Roger, and Gianfranco Piras. 2015. <span>“Comparing Implementations of Estimation Methods for Spatial Econometrics.”</span> <em>Journal of Statistical Software</em> 63 (18): 1–36. <a href="https://doi.org/10.18637/jss.v063.i18">https://doi.org/10.18637/jss.v063.i18</a>.
</div>
<div id="ref-R-spatialreg" class="csl-entry" role="doc-biblioentry">
———. 2022. <em>Spatialreg: Spatial Regression Analysis</em>. <a href="https://CRAN.R-project.org/package=spatialreg">https://CRAN.R-project.org/package=spatialreg</a>.
</div>
<div id="ref-spdep2018" class="csl-entry" role="doc-biblioentry">
Bivand, Roger, and David W. S. Wong. 2018. <span>“Comparing Implementations of Global and Local Indicators of Spatial Association.”</span> <em>TEST</em> 27 (3): 716–48. <a href="https://doi.org/10.1007/s11749-018-0599-x">https://doi.org/10.1007/s11749-018-0599-x</a>.
</div>
<div id="ref-R-huxtable" class="csl-entry" role="doc-biblioentry">
Hugh-Jones, David. 2022. <em>Huxtable: Easily Create and Style Tables for LaTeX, HTML and Other Formats</em>. <a href="https://hughjonesd.github.io/huxtable/">https://hughjonesd.github.io/huxtable/</a>.
</div>
<div id="ref-mctest2019" class="csl-entry" role="doc-biblioentry">
Imdad, M. U., M. Aslam, S. Altaf, and A. Munir. 2019. <span>“Some New Diagnostics of Multicollinearity in Linear Regression Model.”</span> <em>Sains Malaysiana</em> 48(9): 2051–60. <a href="http://dx.doi.org/10.17576/jsm-2019-4809-26">http://dx.doi.org/10.17576/jsm-2019-4809-26</a>.
</div>
<div id="ref-mctest2016" class="csl-entry" role="doc-biblioentry">
Imdadullah, M., M. Aslam, and S. Altaf. 2016. <span>“Mctest: An r Package for Deteection of Collinearity Among Regressors.”</span> <em>The R Journal</em> 8(2): 499–509. <a href="https://journal.r-project.org/archive/2016/RJ-2016-062/index.html">https://journal.r-project.org/archive/2016/RJ-2016-062/index.html</a>.
</div>
<div id="ref-R-PxWebApiData" class="csl-entry" role="doc-biblioentry">
Langsrud, Øyvind, and Jan Bruusgaard. 2021. <em>PxWebApiData: PX-Web Data by API</em>. <a href="https://github.com/statisticsnorway/PxWebApiData">https://github.com/statisticsnorway/PxWebApiData</a>.
</div>
<div id="ref-R-mctest" class="csl-entry" role="doc-biblioentry">
Muhammad, Imdad Ullah, and Aslam Muhammad. 2020. <em>Mctest: Multicollinearity Diagnostic Measures</em>. <a href="https://CRAN.R-project.org/package=mctest">https://CRAN.R-project.org/package=mctest</a>.
</div>
<div id="ref-sf2018" class="csl-entry" role="doc-biblioentry">
Pebesma, Edzer. 2018. <span>“<span class="nocase">Simple Features for R: Standardized Support for Spatial Vector Data</span>.”</span> <em><span>The R Journal</span></em> 10 (1): 439–46. <a href="https://doi.org/10.32614/RJ-2018-009">https://doi.org/10.32614/RJ-2018-009</a>.
</div>
<div id="ref-R-sf" class="csl-entry" role="doc-biblioentry">
———. 2022. <em>Sf: Simple Features for r</em>. <a href="https://CRAN.R-project.org/package=sf">https://CRAN.R-project.org/package=sf</a>.
</div>
<div id="ref-sp2005" class="csl-entry" role="doc-biblioentry">
Pebesma, Edzer J., and Roger S. Bivand. 2005. <span>“Classes and Methods for Spatial Data in <span>R</span>.”</span> <em>R News</em> 5 (2): 9–13. <a href="https://CRAN.R-project.org/doc/Rnews/">https://CRAN.R-project.org/doc/Rnews/</a>.
</div>
<div id="ref-R-sp" class="csl-entry" role="doc-biblioentry">
Pebesma, Edzer, and Roger Bivand. 2022. <em>Sp: Classes and Methods for Spatial Data</em>. <a href="https://CRAN.R-project.org/package=sp">https://CRAN.R-project.org/package=sp</a>.
</div>
<div id="ref-R-broom" class="csl-entry" role="doc-biblioentry">
Robinson, David, Alex Hayes, and Simon Couch. 2022. <em>Broom: Convert Statistical Objects into Tidy Tibbles</em>. <a href="https://CRAN.R-project.org/package=broom">https://CRAN.R-project.org/package=broom</a>.
</div>
<div id="ref-tmap2018" class="csl-entry" role="doc-biblioentry">
Tennekes, Martijn. 2018. <span>“<span class="nocase">tmap</span>: Thematic Maps in <span>R</span>.”</span> <em>Journal of Statistical Software</em> 84 (6): 1–39. <a href="https://doi.org/10.18637/jss.v084.i06">https://doi.org/10.18637/jss.v084.i06</a>.
</div>
<div id="ref-R-tmap" class="csl-entry" role="doc-biblioentry">
———. 2022. <em>Tmap: Thematic Maps</em>. <a href="https://github.com/r-tmap/tmap">https://github.com/r-tmap/tmap</a>.
</div>
<div id="ref-R-tidyverse" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley. 2022. <em>Tidyverse: Easily Install and Load the Tidyverse</em>. <a href="https://CRAN.R-project.org/package=tidyverse">https://CRAN.R-project.org/package=tidyverse</a>.
</div>
<div id="ref-tidyverse2019" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“Welcome to the <span class="nocase">tidyverse</span>.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-R-readxl" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley, and Jennifer Bryan. 2022. <em>Readxl: Read Excel Files</em>. <a href="https://CRAN.R-project.org/package=readxl">https://CRAN.R-project.org/package=readxl</a>.
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        function fireSlideChanged(previousSlide, currentSlide) {

          // dispatch for htmlwidgets
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for reveal
        if (window.Reveal) {
          window.Reveal.addEventListener("slidechanged", function(event) {
            fireSlideChanged(event.previousSlide, event.currentSlide);
          });
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          let href = ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

</body></html>